# Lanmon-maintenance
Обслуживание SCADA-системы LanMon в интересах клиента

Результаты обследования
1.	Базы функционируют в режиме неконтролируемого накопления оперативных данных. 
	Размеры баз растут (в основной архивной таблице содержится порядка 400 млн записей – c 2009 года, таблица с индексами занимает порядка 50Gb). 
	Практикуется удаление лишней архивной информации из системы «при возникновении проблем», без регламента.
2.	Накопленный объем данных увеличивает время выполнения запросов при формировании отчетности.
3.	Значительный объем архивных таблиц – не используемая информация, которую можно выгрузить в 
	файловую систему и определить на долгосрочное хранение вне СУБД (при этом сохранить возможность ее восстановления).
4.	В системе используется версия PostgreSQL 8.3.6, вышедшая в феврале 2009г. и не поддерживаемая в настоящее время. 
	Кроме факторов морального устаревания и меньшей стабильности работы, данная версия не содержит стандартных для современных версий средств мониторинга.
5.	Затруднена организация резервного хранения данных: при данных объемах информации и технических возможностях, 
	снятие бэкапа занимает несколько часов. Существует неоправданно большой риск потери данных.
6.	PostgreSQL установлена на Windows Server (Standard 2007 SP2)	

Рекомендуется:
1.	Определение политики хранения данных, регламента процедур резервного копирования, регламента мониторинга состояния СУБД.
2.	Перевод хранения баз данных с PostgreSQL 8.3.6 на PostgreSQL 11.11 (генератор отчетов, используемый в Lanmon использует функцию PostgreSQL, 
	отсутствующую в 12-й версии, возможность перехода на Postgresql 12 требует отдельных исследований)
3.	Уменьшения объема информации, хранимой в СУБД за счет выделения архивной части, которую можно выгрузить на внешнее хранение (дамп в файловую систему)
4.	Настройка регулярного автоматизированного резервного копирования данных системы (в соответствии с регламентом) – как созданий копий длительного 
	хранения для отдельных баз, так и настройки возможности восстановлений состояния сервера на заданный момент времени на основе журнала транзакций.
